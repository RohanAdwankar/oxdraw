<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="4892" height="1860" viewBox="0 0 4892 1860" font-family="Inter, system-ui, sans-serif">
  <defs>
        <marker id="arrow-end" markerWidth="8" markerHeight="8" refX="6" refY="4" orient="auto" markerUnits="strokeWidth">
            <path d="M1,1 L6,4 L1,7 z" fill="context-stroke" />
        </marker>
        <marker id="arrow-start" markerWidth="8" markerHeight="8" refX="2" refY="4" orient="auto" markerUnits="strokeWidth">
            <path d="M7,1 L2,4 L7,7 z" fill="context-stroke" />
        </marker>
  </defs>
  <rect width="100%" height="100%" fill="white" />
  <g class="subgraph" data-id="LLM_Code_Map_Generation">
    <rect x="912.3" y="476.0" width="1111.0" height="982.0" rx="16" ry="16" fill="#edf2f7" fill-opacity="0.7" stroke="#a0aec0" stroke-width="1.5" />
    <text x="932.3" y="496.0" fill="#2d3748" font-size="14" font-weight="600" text-anchor="start" dominant-baseline="hanging">LLM Code Map Generation</text>
  </g>
  <g class="subgraph" data-id="Edit_Mode">
    <rect x="2067.3" y="636.0" width="1119.1" height="342.0" rx="16" ry="16" fill="#edf2f7" fill-opacity="0.7" stroke="#a0aec0" stroke-width="1.5" />
    <text x="2087.3" y="656.0" fill="#2d3748" font-size="14" font-weight="600" text-anchor="start" dominant-baseline="hanging">Edit Mode</text>
  </g>
  <g class="subgraph" data-id="New_Diagram">
    <rect x="3230.4" y="796.0" width="745.2" height="182.0" rx="16" ry="16" fill="#edf2f7" fill-opacity="0.7" stroke="#a0aec0" stroke-width="1.5" />
    <text x="3250.4" y="816.0" fill="#2d3748" font-size="14" font-weight="600" text-anchor="start" dominant-baseline="hanging">New Diagram</text>
  </g>
  <g class="subgraph" data-id="Render_Diagram">
    <rect x="4019.6" y="796.0" width="791.9" height="662.0" rx="16" ry="16" fill="#edf2f7" fill-opacity="0.7" stroke="#a0aec0" stroke-width="1.5" />
    <text x="4039.6" y="816.0" fill="#2d3748" font-size="14" font-weight="600" text-anchor="start" dominant-baseline="hanging">Render Diagram</text>
  </g>
  <line x1="647.4" y1="130.0" x2="647.4" y2="239.0" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow-end)" />
  <line x1="636.6" y1="286.6" x2="580.3" y2="399.1" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow-end)" />
  <g pointer-events="none">
    <rect x="589.4" y="318.8" width="38.2" height="28.0" rx="6" ry="6" fill="white" fill-opacity="0.96" stroke="#2d3748" stroke-width="1" />
    <text x="608.5" y="332.8" fill="#2d3748" font-size="13" text-anchor="middle" dominant-baseline="middle" xml:space="preserve">Yes</text>
  </g>
  <line x1="660.7" y1="285.7" x2="736.7" y2="403.8" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow-end)" />
  <g pointer-events="none">
    <rect x="680.7" y="320.8" width="36.0" height="28.0" rx="6" ry="6" fill="white" fill-opacity="0.96" stroke="#2d3748" stroke-width="1" />
    <text x="698.7" y="334.8" fill="#2d3748" font-size="13" text-anchor="middle" dominant-baseline="middle" xml:space="preserve">No</text>
  </g>
  <line x1="721.2" y1="439.6" x2="482.0" y2="559.6" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow-end)" />
  <g pointer-events="none">
    <rect x="582.5" y="475.6" width="38.2" height="28.0" rx="6" ry="6" fill="white" fill-opacity="0.96" stroke="#2d3748" stroke-width="1" />
    <text x="601.6" y="489.6" fill="#2d3748" font-size="13" text-anchor="middle" dominant-baseline="middle" xml:space="preserve">Yes</text>
  </g>
  <line x1="732.7" y1="443.7" x2="617.6" y2="565.6" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow-end)" />
  <g pointer-events="none">
    <rect x="657.1" y="480.6" width="36.0" height="28.0" rx="6" ry="6" fill="white" fill-opacity="0.96" stroke="#2d3748" stroke-width="1" />
    <text x="675.1" y="494.6" fill="#2d3748" font-size="13" text-anchor="middle" dominant-baseline="middle" xml:space="preserve">No</text>
  </g>
  <polyline points="588.3,606.1 499.9,776.1 426.3,802.6 352.7,829.0 214.3,770.4" fill="none" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow-end)" />
  <g pointer-events="none">
    <rect x="407.2" y="788.6" width="38.2" height="28.0" rx="6" ry="6" fill="white" fill-opacity="0.96" stroke="#2d3748" stroke-width="1" />
    <text x="426.3" y="802.6" fill="#2d3748" font-size="13" text-anchor="middle" dominant-baseline="middle" xml:space="preserve">Yes</text>
  </g>
  <line x1="573.3" y1="600.7" x2="376.6" y2="719.5" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow-end)" />
  <g pointer-events="none">
    <rect x="456.9" y="636.1" width="36.0" height="28.0" rx="6" ry="6" fill="white" fill-opacity="0.96" stroke="#2d3748" stroke-width="1" />
    <text x="474.9" y="650.1" fill="#2d3748" font-size="13" text-anchor="middle" dominant-baseline="middle" xml:space="preserve">No</text>
  </g>
  <polyline points="599.5,400.0 927.8,144.6 1248.2,184.6 1568.7,224.6 1829.0,559.2" fill="none" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow-end)" />
  <line x1="1817.1" y1="610.0" x2="1676.8" y2="719.4" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow-end)" />
  <line x1="1556.3" y1="770.0" x2="1171.4" y2="879.7" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow-end)" />
  <line x1="1161.9" y1="930.0" x2="1509.1" y2="1039.7" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow-end)" />
  <line x1="1573.0" y1="1090.0" x2="1502.3" y2="1199.2" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow-end)" />
  <line x1="1501.2" y1="1250.0" x2="1569.4" y2="1359.2" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow-end)" />
  <g pointer-events="none">
    <rect x="1508.8" y="1280.6" width="53.0" height="28.0" rx="6" ry="6" fill="white" fill-opacity="0.96" stroke="#2d3748" stroke-width="1" />
    <text x="1535.3" y="1294.6" fill="#2d3748" font-size="13" text-anchor="middle" dominant-baseline="middle" xml:space="preserve">Valid</text>
  </g>
  <line x1="1454.1" y1="1200.0" x2="1115.1" y2="930.6" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow-end)" />
  <g pointer-events="none">
    <rect x="1250.7" y="1041.3" width="67.8" height="28.0" rx="6" ry="6" fill="white" fill-opacity="0.96" stroke="#2d3748" stroke-width="1" />
    <text x="1284.6" y="1055.3" fill="#2d3748" font-size="13" text-anchor="middle" dominant-baseline="middle" xml:space="preserve">Invalid</text>
  </g>
  <polyline points="453.5,610.0 1023.0,1249.4 1576.9,1286.7 2130.8,1324.0 2776.5,770.7" fill="none" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow-end)" />
  <polyline points="453.3,610.0 1039.2,1273.0 1687.2,1313.0 2335.3,1353.0 2994.3,770.7" fill="none" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow-end)" />
  <polyline points="431.2,560.0 431.2,511.0 2185.3,511.0 2185.3,879.0" fill="none" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow-end)" />
  <polyline points="177.0,770.0 918.6,1589.2 1722.9,1629.2 2527.1,1669.2 3342.9,930.7" fill="none" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow-end)" />
  <polyline points="177.2,770.0 971.0,1641.6 1827.6,1681.6 2684.2,1721.6 3552.6,930.7" fill="none" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow-end)" />
  <polyline points="177.3,770.0 1028.9,1699.5 1943.5,1739.5 2858.0,1779.5 3784.5,930.7" fill="none" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow-end)" />
  <polyline points="154.4,720.0 154.4,671.0 2185.3,671.0 2185.3,879.0" fill="none" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow-end)" />
  <polyline points="334.3,720.0 334.3,671.0 4487.0,671.0 4487.0,879.0" fill="none" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow-end)" />
  <polyline points="334.3,720.0 334.3,671.0 4670.6,671.0 4670.6,879.0" fill="none" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow-end)" />
  <line x1="4589.2" y1="930.0" x2="4231.8" y2="1039.7" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow-end)" />
  <line x1="4165.6" y1="1090.0" x2="4236.3" y2="1199.2" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow-end)" />
  <line x1="4241.4" y1="1250.0" x2="4191.0" y2="1359.1" stroke="#2d3748" stroke-width="2" marker-end="url(#arrow-end)" />
  <rect x="532.3" y="80.0" width="230.2" height="50.0" rx="8" ry="8" fill="#fde68a" stroke="#2d3748" stroke-width="2" />
  <text x="647.4" y="105.0" fill="#1a202c" font-size="14" text-anchor="middle" dominant-baseline="middle">cli::run_render_or_edit</text>
  <polygon points="647.4,240.0 725.5,265.0 647.4,290.0 569.3,265.0" fill="#fbcfe8" stroke="#2d3748" stroke-width="2" />
  <text x="647.4" y="265.0" fill="#1a202c" font-size="14" text-anchor="middle" dominant-baseline="middle">cli.code_map?</text>
  <rect x="474.5" y="400.0" width="185.8" height="50.0" rx="8" ry="8" fill="#fde68a" stroke="#2d3748" stroke-width="2" />
  <text x="567.4" y="425.0" fill="#1a202c" font-size="14" text-anchor="middle" dominant-baseline="middle">cli::run_code_map</text>
  <polygon points="750.3,400.0 820.3,425.0 750.3,450.0 680.3,425.0" fill="#fbcfe8" stroke="#2d3748" stroke-width="2" />
  <text x="750.3" y="425.0" fill="#1a202c" font-size="14" text-anchor="middle" dominant-baseline="middle">cli.edit?</text>
  <rect x="353.1" y="560.0" width="156.2" height="50.0" rx="8" ry="8" fill="#fde68a" stroke="#2d3748" stroke-width="2" />
  <text x="431.2" y="585.0" fill="#1a202c" font-size="14" text-anchor="middle" dominant-baseline="middle">cli::run_edit</text>
  <polygon points="599.3,560.0 669.3,585.0 599.3,610.0 529.3,585.0" fill="#fbcfe8" stroke="#2d3748" stroke-width="2" />
  <text x="599.3" y="585.0" fill="#1a202c" font-size="14" text-anchor="middle" dominant-baseline="middle">cli.new?</text>
  <rect x="80.0" y="720.0" width="148.8" height="50.0" rx="8" ry="8" fill="#fde68a" stroke="#2d3748" stroke-width="2" />
  <text x="154.4" y="745.0" fill="#1a202c" font-size="14" text-anchor="middle" dominant-baseline="middle">cli::run_new</text>
  <rect x="248.8" y="720.0" width="171.0" height="50.0" rx="8" ry="8" fill="#fde68a" stroke="#2d3748" stroke-width="2" />
  <text x="334.3" y="745.0" fill="#1a202c" font-size="14" text-anchor="middle" dominant-baseline="middle">cli::run_render</text>
  <rect x="1722.9" y="560.0" width="252.4" height="50.0" rx="8" ry="8" fill="#fde68a" stroke="#2d3748" stroke-width="2" />
  <text x="1849.1" y="585.0" fill="#1a202c" font-size="14" text-anchor="middle" dominant-baseline="middle">codemap::generate_code_map</text>
  <rect x="1473.4" y="720.0" width="341.2" height="50.0" rx="8" ry="8" fill="#fde68a" stroke="#2d3748" stroke-width="2" />
  <text x="1644.0" y="745.0" fill="#1a202c" font-size="14" text-anchor="middle" dominant-baseline="middle">Scan codebase (codemap::scan_codebase)</text>
  <rect x="960.3" y="880.0" width="245.0" height="50.0" rx="8" ry="8" fill="#fde68a" stroke="#2d3748" stroke-width="2" />
  <text x="1082.8" y="905.0" fill="#1a202c" font-size="14" text-anchor="middle" dominant-baseline="middle">LLM API Request (reqwest)</text>
  <rect x="1492.6" y="1040.0" width="193.2" height="50.0" rx="8" ry="8" fill="#fde68a" stroke="#2d3748" stroke-width="2" />
  <text x="1589.2" y="1065.0" fill="#1a202c" font-size="14" text-anchor="middle" dominant-baseline="middle">Parse LLM Response</text>
  <rect x="1285.4" y="1200.0" width="400.4" height="50.0" rx="8" ry="8" fill="#fde68a" stroke="#2d3748" stroke-width="2" />
  <text x="1485.6" y="1225.0" fill="#1a202c" font-size="14" text-anchor="middle" dominant-baseline="middle">Validate Response (codemap::validate_response)</text>
  <rect x="1459.3" y="1360.0" width="252.4" height="50.0" rx="8" ry="8" fill="#fde68a" stroke="#2d3748" stroke-width="2" />
  <text x="1585.5" y="1385.0" fill="#1a202c" font-size="14" text-anchor="middle" dominant-baseline="middle">Return Mermaid and Mapping</text>
  <rect x="2724.6" y="720.0" width="163.6" height="50.0" rx="8" ry="8" fill="#fde68a" stroke="#2d3748" stroke-width="2" />
  <text x="2806.4" y="745.0" fill="#1a202c" font-size="14" text-anchor="middle" dominant-baseline="middle">locate_ui_dist</text>
  <rect x="2908.2" y="720.0" width="230.2" height="50.0" rx="8" ry="8" fill="#fde68a" stroke="#2d3748" stroke-width="2" />
  <text x="3023.3" y="745.0" fill="#1a202c" font-size="14" text-anchor="middle" dominant-baseline="middle">ServeArgs Configuration</text>
  <rect x="2115.3" y="880.0" width="140.0" height="50.0" rx="8" ry="8" fill="#fde68a" stroke="#2d3748" stroke-width="2" />
  <text x="2185.3" y="905.0" fill="#1a202c" font-size="14" text-anchor="middle" dominant-baseline="middle">run_serve</text>
  <rect x="3278.4" y="880.0" width="185.8" height="50.0" rx="8" ry="8" fill="#fde68a" stroke="#2d3748" stroke-width="2" />
  <text x="3371.3" y="905.0" fill="#1a202c" font-size="14" text-anchor="middle" dominant-baseline="middle">select_graph_type</text>
  <rect x="3484.2" y="880.0" width="193.2" height="50.0" rx="8" ry="8" fill="#fde68a" stroke="#2d3748" stroke-width="2" />
  <text x="3580.8" y="905.0" fill="#1a202c" font-size="14" text-anchor="middle" dominant-baseline="middle">ensure_unique_path</text>
  <rect x="3697.4" y="880.0" width="230.2" height="50.0" rx="8" ry="8" fill="#fde68a" stroke="#2d3748" stroke-width="2" />
  <text x="3812.5" y="905.0" fill="#1a202c" font-size="14" text-anchor="middle" dominant-baseline="middle">ServeArgs Configuration</text>
  <rect x="4416.3" y="880.0" width="141.4" height="50.0" rx="8" ry="8" fill="#fde68a" stroke="#2d3748" stroke-width="2" />
  <text x="4487.0" y="905.0" fill="#1a202c" font-size="14" text-anchor="middle" dominant-baseline="middle">parse_input</text>
  <rect x="4577.7" y="880.0" width="185.8" height="50.0" rx="8" ry="8" fill="#fde68a" stroke="#2d3748" stroke-width="2" />
  <text x="4670.6" y="905.0" fill="#1a202c" font-size="14" text-anchor="middle" dominant-baseline="middle">read input source</text>
  <rect x="4067.6" y="1040.0" width="163.6" height="50.0" rx="8" ry="8" fill="#fde68a" stroke="#2d3748" stroke-width="2" />
  <text x="4149.4" y="1065.0" fill="#1a202c" font-size="14" text-anchor="middle" dominant-baseline="middle">Diagram::parse</text>
  <rect x="4067.6" y="1200.0" width="370.8" height="50.0" rx="8" ry="8" fill="#fde68a" stroke="#2d3748" stroke-width="2" />
  <text x="4253.0" y="1225.0" fill="#1a202c" font-size="14" text-anchor="middle" dominant-baseline="middle">Diagram::render_svg or Diagram::render_png</text>
  <rect x="4093.5" y="1360.0" width="171.0" height="50.0" rx="8" ry="8" fill="#fde68a" stroke="#2d3748" stroke-width="2" />
  <text x="4179.0" y="1385.0" fill="#1a202c" font-size="14" text-anchor="middle" dominant-baseline="middle">Write to output</text>
</svg>
